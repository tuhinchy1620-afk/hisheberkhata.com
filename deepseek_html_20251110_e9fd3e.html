<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶π‡¶ø‡¶∏‡ßá‡¶¨ - Firebase</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); overflow: hidden; }
        .header { background: linear-gradient(135deg, #2c3e50, #34495e); color: white; padding: 30px; text-align: center; }
        .login-section { padding: 40px; text-align: center; background: #f8f9fa; }
        .main-section { display: none; padding: 20px; }
        input, select, button { padding: 12px 15px; margin: 8px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; width: 200px; }
        button { background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; cursor: pointer; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #34495e; color: white; }
        .delete-btn { background: #e74c3c; padding: 8px 15px; font-size: 14px; width: auto; }
        .total-section { background: #2ecc71; color: white; padding: 20px; border-radius: 10px; margin-top: 20px; }
        .logout-btn { background: #e74c3c; width: auto; float: right; margin: 10px; }
    </style>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶π‡¶ø‡¶∏‡ßá‡¶¨</h1>
            <p>Firebase Realtime Database - ‡¶∏‡¶¨‡¶æ‡¶á ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá</p>
        </div>
        
        <div class="login-section" id="loginSection">
            <h2>‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
            <input type="text" id="username" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ" value="admin">
            <input type="password" id="password" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°" value="12345">
            <br>
            <button onclick="login()">‡¶≤‡¶ó‡¶á‡¶®</button>
            <p style="margin-top: 15px; color: #666;">‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ: admin, ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°: 12345</p>
        </div>
        
        <div class="main-section" id="mainSection">
            <button class="logout-btn" onclick="logout()">‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                <h2>‡¶®‡¶§‡ßÅ‡¶® ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
                <input type="date" id="entryDate">
                <input type="text" id="description" placeholder="‡¶¨‡¶ø‡¶¨‡¶∞‡¶£">
                <input type="number" id="income" placeholder="‡¶Ü‡ßü‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£">
                <input type="number" id="expense" placeholder="‡¶¨‡ßç‡¶Ø‡ßü‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£">
                <button onclick="addEntry()">‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
            
            <div>
                <h2>‡¶∏‡¶ï‡¶≤ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø (Real-time)</h2>
                <div id="entriesList"></div>
                <div class="total-section" id="totalSection"></div>
            </div>
        </div>
    </div>

    <script>
        // üî• YOUR FIREBASE CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyBa9EvGgBLMh1BTEGV4GVp_YaxilXabfOM",
            authDomain: "my-expense-tracker-e9bfc.firebaseapp.com",
            databaseURL: "https://my-expense-tracker-e9bfc-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "my-expense-tracker-e9bfc",
            storageBucket: "my-expense-tracker-e9bfc.firebasestorage.app",
            messagingSenderId: "143972185279",
            appId: "1:143972185279:web:7d1282e17fee9171c8820a"
        };

        // Firebase Initialize
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        const DEFAULT_USERNAME = "admin";
        const DEFAULT_PASSWORD = "12345";
        
        // Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
        function getEntriesFromFirebase(callback) {
            database.ref('expenses').on('value', (snapshot) => {
                const data = snapshot.val();
                const entries = data ? Object.values(data) : [];
                callback(entries);
            });
        }
        
        // Firebase-‡¶è ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ
        function saveEntryToFirebase(entry) {
            return database.ref('expenses/' + entry.id).set(entry);
        }
        
        // Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ
        function deleteEntryFromFirebase(id) {
            return database.ref('expenses/' + id).remove();
        }
        
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username === DEFAULT_USERNAME && password === DEFAULT_PASSWORD) {
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('mainSection').style.display = 'block';
                loadEntries();
                alert('‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤! Firebase Connected');
            } else {
                alert('‡¶≠‡ßÅ‡¶≤ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°!');
            }
        }
        
        function logout() {
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('mainSection').style.display = 'none';
        }
        
        function addEntry() {
            const date = document.getElementById('entryDate').value;
            const description = document.getElementById('description').value;
            const income = parseFloat(document.getElementById('income').value) || 0;
            const expense = parseFloat(document.getElementById('expense').value) || 0;
            
            if (!date || !description) {
                alert('‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®');
                return;
            }
            
            const newEntry = {
                id: Date.now(),
                date: date,
                description: description,
                income: income,
                expense: expense,
                user: 'admin',
                timestamp: firebase.database.ServerValue.TIMESTAMP
            };
            
            // Firebase-‡¶è ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
            saveEntryToFirebase(newEntry)
                .then(() => {
                    document.getElementById('description').value = '';
                    document.getElementById('income').value = '';
                    document.getElementById('expense').value = '';
                    alert('‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶∏‡ßá‡¶≠ ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶∏‡¶¨‡¶æ‡¶á ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶¨‡ßá');
                })
                .catch((error) => {
                    alert('Error: ' + error.message);
                });
        }
        
        function deleteEntry(id) {
            if (confirm('‡¶è‡¶á ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                deleteEntryFromFirebase(id)
                    .then(() => {
                        alert('‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
                    })
                    .catch((error) => {
                        alert('Error: ' + error.message);
                    });
            }
        }
        
        function loadEntries() {
            getEntriesFromFirebase((entries) => {
                const entriesList = document.getElementById('entriesList');
                const totalSection = document.getElementById('totalSection');
                
                if (entries.length === 0) {
                    entriesList.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">‡¶ï‡ßã‡¶®‡ßã ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶®‡ßá‡¶á‡•§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>';
                    totalSection.innerHTML = '';
                    return;
                }
                
                let tableHTML = `
                    <table>
                        <thead>
                            <tr>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</th>
                                <th>‡¶Ü‡ßü</th>
                                <th>‡¶¨‡ßç‡¶Ø‡ßü</th>
                                <th>‡¶ï‡¶æ‡¶ú</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                let totalIncome = 0;
                let totalExpense = 0;
                
                entries.forEach(entry => {
                    totalIncome += entry.income;
                    totalExpense += entry.expense;
                    
                    tableHTML += `
                        <tr>
                            <td>${entry.date}</td>
                            <td>${entry.description}</td>
                            <td style="color: green;">${entry.income}‡ß≥</td>
                            <td style="color: red;">${entry.expense}‡ß≥</td>
                            <td><button class="delete-btn" onclick="deleteEntry(${entry.id})">‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button></td>
                        </tr>
                    `;
                });
                
                tableHTML += '</tbody></table>';
                entriesList.innerHTML = tableHTML;
                
                const balance = totalIncome - totalExpense;
                totalSection.innerHTML = `
                    <h3>‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü ‡¶∏‡¶æ‡¶∞‡¶æ‡¶Ç‡¶∂</h3>
                    <p>‡¶Æ‡ßã‡¶ü ‡¶Ü‡ßü: <strong>${totalIncome}‡ß≥</strong></p>
                    <p>‡¶Æ‡ßã‡¶ü ‡¶¨‡ßç‡¶Ø‡ßü: <strong>${totalExpense}‡ß≥</strong></p>
                    <p>‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: <strong style="color: ${balance >= 0 ? '#2ecc71' : '#e74c3c'}">${balance}‡ß≥</strong></p>
                `;
            });
        }
        
        window.onload = function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('entryDate').value = today;
        };
    </script>
</body>
</html>